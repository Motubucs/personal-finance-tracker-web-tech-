"use strict";(self["webpackChunkpersonal_finance_tracker"]=self["webpackChunkpersonal_finance_tracker"]||[]).push([[711],{3711:function(e,o,t){t.r(o),t.d(o,{default:function(){return g}});var a=t(5796);const n={class:"form-container"},r={class:"form-row"},s={class:"form-group"},l={class:"form-group"},i={class:"form-row"},c={class:"form-group"},d={class:"form-group"},u={class:"form-group full-width"},m={class:"form-actions"};function f(e,o,t,f,p,y){const h=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",n,[o[14]||(o[14]=(0,a.Lk)("div",{class:"form-header"},[(0,a.Lk)("h2",null,[(0,a.Lk)("span",{class:"form-icon"},"‚ûï"),(0,a.eW)(" Add New Transaction ")]),(0,a.Lk)("p",{class:"form-subtitle"},"Track your income and expenses")],-1)),(0,a.Lk)("form",{onSubmit:o[5]||(o[5]=(0,a.D$)(((...e)=>y.handleSubmit&&y.handleSubmit(...e)),["prevent"])),class:"transaction-form"},[(0,a.Lk)("div",r,[(0,a.Lk)("div",s,[o[7]||(o[7]=(0,a.Lk)("label",{for:"type"},[(0,a.Lk)("span",{class:"label-icon"},"üìù"),(0,a.eW)(" Transaction Type ")],-1)),(0,a.bo)((0,a.Lk)("select",{id:"type","onUpdate:modelValue":o[0]||(o[0]=e=>p.form.type=e),required:"",class:"form-select"},o[6]||(o[6]=[(0,a.Lk)("option",{disabled:"",value:""},"Select type",-1),(0,a.Lk)("option",{value:"income"},"üí∞ Income",-1),(0,a.Lk)("option",{value:"expense"},"üí∏ Expense",-1)]),512),[[a.u1,p.form.type]])]),(0,a.Lk)("div",l,[o[8]||(o[8]=(0,a.Lk)("label",{for:"amount"},[(0,a.Lk)("span",{class:"label-icon"},"üí≤"),(0,a.eW)(" Amount (RM) ")],-1)),(0,a.bo)((0,a.Lk)("input",{id:"amount",type:"number","onUpdate:modelValue":o[1]||(o[1]=e=>p.form.amount=e),min:"0.01",step:"0.01",required:"",class:"form-input",placeholder:"0.00"},null,512),[[a.Jo,p.form.amount,void 0,{number:!0}]])])]),(0,a.Lk)("div",i,[(0,a.Lk)("div",c,[o[9]||(o[9]=(0,a.Lk)("label",{for:"category"},[(0,a.Lk)("span",{class:"label-icon"},"üè∑Ô∏è"),(0,a.eW)(" Category ")],-1)),(0,a.bo)((0,a.Lk)("input",{id:"category",type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>p.form.category=e),required:"",class:"form-input",placeholder:"e.g., Groceries, Salary, Entertainment"},null,512),[[a.Jo,p.form.category]])]),(0,a.Lk)("div",d,[o[10]||(o[10]=(0,a.Lk)("label",{for:"date"},[(0,a.Lk)("span",{class:"label-icon"},"üìÖ"),(0,a.eW)(" Date ")],-1)),(0,a.bo)((0,a.Lk)("input",{id:"date",type:"date","onUpdate:modelValue":o[3]||(o[3]=e=>p.form.date=e),required:"",class:"form-input"},null,512),[[a.Jo,p.form.date]])])]),(0,a.Lk)("div",u,[o[11]||(o[11]=(0,a.Lk)("label",{for:"note"},[(0,a.Lk)("span",{class:"label-icon"},"üìÑ"),(0,a.eW)(" Note (optional) ")],-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":o[4]||(o[4]=e=>p.form.note=e),placeholder:"Add a description or note about this transaction...",class:"form-textarea"},null,512),[[a.Jo,p.form.note]])]),(0,a.Lk)("div",m,[o[13]||(o[13]=(0,a.Lk)("button",{type:"submit",class:"submit-btn"},[(0,a.Lk)("span",{class:"btn-icon"},"‚úÖ"),(0,a.eW)(" Add Transaction ")],-1)),(0,a.bF)(h,{to:"/",class:"cancel-btn"},{default:(0,a.k6)((()=>o[12]||(o[12]=[(0,a.Lk)("span",{class:"btn-icon"},"‚ùå",-1),(0,a.eW)(" Cancel ")]))),_:1,__:[12]})])],32)])}t(4114);var p={name:"AddForm",data(){return{form:{type:"",amount:0,category:"",date:"",note:""}}},methods:{async handleSubmit(){try{console.log("=== FORM SUBMISSION STARTED ==="),console.log("Form data:",JSON.stringify(this.form)),console.log("Current URL:",window.location.href),console.log("User Agent:",navigator.userAgent);const t=[];if(this.form.type||t.push("Transaction type is required"),(!this.form.amount||this.form.amount<=0)&&t.push("Valid amount is required"),this.form.category||t.push("Category is required"),this.form.date||t.push("Date is required"),t.length>0)return console.error("Validation errors:",t),void alert("‚ùå Please fix the following:\n"+t.join("\n"));console.log("‚úÖ Form validation passed"),console.log("üéØ === NETLIFY FUNCTIONS MODE ==="),console.log("üíæ Using Netlify Functions - No CORS issues!");const a="/.netlify/functions";try{const e={type:this.form.type,amount:parseFloat(this.form.amount),category:this.form.category,date:this.form.date,note:this.form.note||"",created_at:(new Date).toISOString()};console.log("‚ûï Adding new transaction:",e);const o=await fetch(`${a}/add-transaction`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!o.ok){const e=await o.text();throw console.error("‚ùå Netlify Function response:",o.status,e),new Error(`Failed to save transaction: ${o.status} ${e}`)}{const e=await o.json();console.log("‚úÖ Transaction saved via Netlify Functions:",e),alert("‚úÖ Transaction Added Successfully!\n\nüöÄ Using Netlify Functions - No CORS issues!"),this.form={type:"",amount:0,category:"",date:"",note:""},this.$router.push("/")}}catch(e){console.error("‚ùå Shared database error:",e),console.log("üîÑ Falling back to localStorage...");try{const e=JSON.parse(localStorage.getItem("transactions")||"[]"),o={id:Date.now(),type:this.form.type,amount:parseFloat(this.form.amount),category:this.form.category,date:this.form.date,note:this.form.note||"",created_at:(new Date).toISOString()};e.unshift(o),localStorage.setItem("transactions",JSON.stringify(e)),alert("‚ö†Ô∏è Transaction saved locally only!\n\nÔøΩ Network error: Could not save to shared database.\nThis transaction is only visible on your device."),this.form={type:"",amount:0,category:"",date:"",note:""},this.$router.push("/")}catch(o){console.error("‚ùå localStorage fallback failed:",o),alert("‚ùå Failed to save transaction!\n\nPlease check your internet connection and try again.")}}}catch(e){console.error("=== SUBMISSION ERROR ==="),console.error("Error type:",e.constructor.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack),console.error("Full error object:",e);let o="‚ùå Failed to add transaction\n\n";e.message&&(o+=`Error: ${e.message}\n\n`),e.response&&(o+=`Server Error: ${e.response.status} ${e.response.statusText}\n\n`),o+="üì± If you're on mobile, please try:\n",o+="‚Ä¢ Refresh the page and try again\n",o+="‚Ä¢ Check your internet connection\n",o+="‚Ä¢ Try using a different browser\n\n",o+="üîç Check browser console for technical details",alert(o)}}}},y=t(1241);const h=(0,y.A)(p,[["render",f],["__scopeId","data-v-b1148f7e"]]);var g=h}}]);